<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Daily Check-in</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Gugi&display=swap"
      rel="stylesheet"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Gugi", sans-serif;
      }

      html,
      body {
        height: 100%;
      }

      body {
        background-color: #120106;
        min-height: 100vh;
        width: 100vw;
        display: block;
        position: relative;
      }

      .container {
        max-width: 375px;
        width: 100%;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        padding: 20px 0;
        display: flex;
        flex-direction: column;
        background: url("images/screen2/background.jpg") center/cover no-repeat;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        border-radius: 16px;
      }

      .close-button {
        position: absolute;
        right: 16px;
        top: 16px;
        background: none;
        border: none;
        color: white;
        font-size: 24px;
        cursor: pointer;
        z-index: 10;
      }

      .main-content {
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
        position: relative;
        padding: 40px 16px 0;
      }

      .character {
        width: 253px;
        height: 358px;
        margin: 20px auto -80px;
        position: relative;
        z-index: 1;
      }

      .title {
        width: 294px;
        margin: 0 auto;
        position: relative;
        z-index: 2;
        filter: drop-shadow(0px 4px 15px rgba(255, 0, 0, 0.25));
      }

      .red-glow {
        position: absolute;
        width: 225px;
        height: 225px;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        background: #ff4747;
        opacity: 0.6;
        filter: blur(75px);
        z-index: 0;
      }

      .days-grid {
        display: flex;
        flex-direction: row;
        justify-content: center;
        align-items: center;
        padding: 0px;
        gap: 8px;
        width: 343px;
        margin: 0 auto;
        position: relative;
        z-index: 2;
      }

      .days-grid-bottom {
        display: flex;
        flex-direction: row;
        justify-content: center;
        align-items: center;
        padding: 0px;
        gap: 8px;
        width: 343px;
        margin: 8px auto 20px;
        position: relative;
        z-index: 2;
      }

      .day-box {
        width: 81.75px;
        height: 81.75px;
        background: radial-gradient(
          50% 50% at 50% 50%,
          #801c22 0%,
          #46090d 100%
        );
        border-radius: 8px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 8px;
        position: relative;
        cursor: pointer;
      }

      .day-box.inactive {
        opacity: 0.8;
        background: radial-gradient(
          50% 50% at 50% 50%,
          rgba(128, 28, 34, 0.8) 0%,
          rgba(70, 9, 13, 0.8) 100%
        );
        cursor: not-allowed;
      }

      .day-box img {
        width: 24px;
        height: 24px;
        margin-bottom: 4px;
      }

      .day-label {
        color: #ffe200;
        font-size: 12px;
        text-align: center;
      }

      .tab-label {
        background: linear-gradient(180deg, #fff176 0%, #ff8f00 100%);
        color: black;
        padding: 4px 12px;
        border-radius: 4px;
        font-size: 12px;
        position: absolute;
        top: -12px;
        right: 8px;
        display: none;
      }

      .day-box.active .tab-label {
        display: block;
      }

      .bottom-section {
        padding: 0 16px;
        position: relative;
        z-index: 2;
        width: 100%;
        margin-top: 20px;
      }

      .timer {
        display: flex;
        justify-content: space-between;
        color: #ff4d4d;
        opacity: 0.8;
        margin-bottom: 12px;
      }

      .timer-value {
        color: #ff8080;
      }

      .collect-button {
        width: 100%;
        padding: 16px;
        background: linear-gradient(180deg, #fff176 0%, #ffa726 100%);
        border: none;
        border-radius: 12px;
        color: black;
        font-size: 18px;
        font-weight: bold;
        cursor: pointer;
        box-shadow: 0 4px 0 #ffb74d;
      }

      .collect-button:disabled {
        opacity: 0.7;
        cursor: not-allowed;
      }

      .gradient-overlay {
        position: absolute;
        left: 0;
        right: 0;
        bottom: 0;
        height: 30%;
        background: linear-gradient(180deg, rgba(18, 1, 6, 0) 0%, #120106 100%);
        pointer-events: none;
        z-index: 1;
      }

      .days-grid .day-box {
        max-width: calc((343px - 16px) / 3);
      }

      .days-grid-bottom .day-box {
        max-width: calc((343px - 24px) / 4);
      }
    </style>
  </head>
  <body>
    <div class="container">
      <button class="close-button">Ã—</button>
      <div class="red-glow"></div>

      <div class="main-content">
        <img
          src="images/screen2/daily-checkin-title.png"
          alt="Daily Check-in"
          class="title"
        />
        <img
          src="images/screen2/character.png"
          alt="Character"
          class="character"
        />

        <div class="days-grid">
          <div class="day-box active" data-day="1">
            <img src="images/screen2/lock-icon.png" alt="Lock" />
            <span class="day-label">Day 1</span>
            <span class="tab-label">Tab</span>
          </div>
          <div class="day-box inactive" data-day="2">
            <img src="images/screen2/lock-icon.png" alt="Lock" />
            <span class="day-label">Day 2</span>
            <span class="tab-label">Tab</span>
          </div>
          <div class="day-box inactive" data-day="3">
            <img src="images/screen2/lock-icon.png" alt="Lock" />
            <span class="day-label">Day 3</span>
            <span class="tab-label">Tab</span>
          </div>
        </div>

        <div class="days-grid-bottom">
          <div class="day-box inactive" data-day="4">
            <img src="images/screen2/lock-icon.png" alt="Lock" />
            <span class="day-label">Day 4</span>
            <span class="tab-label">Tab</span>
          </div>
          <div class="day-box inactive" data-day="5">
            <img src="images/screen2/lock-icon.png" alt="Lock" />
            <span class="day-label">Day 5</span>
            <span class="tab-label">Tab</span>
          </div>
          <div class="day-box inactive" data-day="6">
            <img src="images/screen2/lock-icon.png" alt="Lock" />
            <span class="day-label">Day 6</span>
            <span class="tab-label">Tab</span>
          </div>
          <div class="day-box inactive" data-day="7">
            <img src="images/screen2/lock-icon.png" alt="Lock" />
            <span class="day-label">Day 7</span>
            <span class="tab-label">Tab</span>
          </div>
        </div>

        <div class="bottom-section">
          <div class="timer">
            <span>Next reward in</span>
            <span class="timer-value">2h 00m</span>
          </div>
          <button class="collect-button">TAP TO COLLECT</button>
        </div>
      </div>

      <div class="gradient-overlay"></div>
    </div>

    <script>
      // Store the last tab time in localStorage
      const COOLDOWN_TIME = 2 * 60 * 60 * 1000; // 2 hours in milliseconds

      function initializeDays() {
        const lastTabTime = localStorage.getItem("lastTabTime");
        const currentDay = parseInt(localStorage.getItem("currentDay")) || 1;

        // Update UI based on current day
        document.querySelectorAll(".day-box").forEach((box) => {
          const day = parseInt(box.dataset.day);
          if (day < currentDay) {
            box.classList.remove("active", "inactive");
          } else if (day === currentDay) {
            box.classList.add("active");
            box.classList.remove("inactive");
          } else {
            box.classList.add("inactive");
            box.classList.remove("active");
          }
        });

        // Update timer if on cooldown
        if (lastTabTime) {
          const timeLeft = COOLDOWN_TIME - (Date.now() - parseInt(lastTabTime));
          if (timeLeft > 0) {
            updateTimer(timeLeft);
            document.querySelector(".collect-button").disabled = true;
          }
        }
      }

      function updateTimer(timeLeft) {
        const hours = Math.floor(timeLeft / (60 * 60 * 1000));
        const minutes = Math.floor((timeLeft % (60 * 60 * 1000)) / (60 * 1000));
        document.querySelector(
          ".timer-value"
        ).textContent = `${hours}h ${minutes.toString().padStart(2, "0")}m`;
      }

      function startCooldown() {
        localStorage.setItem("lastTabTime", Date.now().toString());
        document.querySelector(".collect-button").disabled = true;

        // Start timer update interval
        const timerInterval = setInterval(() => {
          const timeLeft =
            COOLDOWN_TIME -
            (Date.now() - parseInt(localStorage.getItem("lastTabTime")));
          if (timeLeft <= 0) {
            clearInterval(timerInterval);
            document.querySelector(".timer-value").textContent = "0h 00m";
            document.querySelector(".collect-button").disabled = false;
          } else {
            updateTimer(timeLeft);
          }
        }, 1000);
      }

      document
        .querySelector(".collect-button")
        .addEventListener("click", () => {
          const currentDay = parseInt(localStorage.getItem("currentDay")) || 1;
          if (currentDay <= 7) {
            localStorage.setItem("currentDay", (currentDay + 1).toString());
            startCooldown();
            initializeDays();
          }
        });

      document.querySelector(".close-button").addEventListener("click", () => {
        window.location.href = "screen3.html";
      });

      // Initialize on page load
      initializeDays();
    </script>
  </body>
</html>
